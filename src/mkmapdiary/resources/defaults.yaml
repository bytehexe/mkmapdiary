# Default configuration for mkmapdiary

# The !auto value indicates that the value is automatically determined
# based on system settings.

input_formats:
  # Supported file formats
  # --
  # formats:
  # Key starting with a dot: indicates a file extension
  # Key without a dot: indicates a tag from identify-cli
  # Value: the format name to pass to the respective input handler; null to ignore the file
  gpsbabel:
    formats:
      # Do not add gpx here! It is the internal default format.
      kml: kml
      .bin: qstarz_bl-1000
      .poi: qstarz_bl-1000
      .dat: null
  raw:
    formats:
      .cr2: raw
      .cr3: raw
      .crw: raw
      .nef: raw
      .nrw: raw
      .arw: raw
      .sr2: raw
      .srf: raw

features:
  # Feature configuration defaults
  cr2:
    use_thumbnail: false
  transcription:
    enabled: !auto
  llms:
    enabled: true
    text_model: "llama3:8b"  # TODO: Not implemented - individual llm_prompts.*.model used instead
  geo_correlation:
    enabled: true  # TODO: Not implemented - no code checks this flag, correlation always runs
    time_offset: !duration 0 seconds  # TODO: Not implemented - no code uses this offset
    max_time_diff: !duration 300 seconds
  poi_detection:
    enabled: true
    max_age: !duration 300 days  # TODO: Not implemented - no code uses this configuration
    priorities:
      # Higher value = higher priority
      # Default priority: 0
      # Disable: null
      city: 100
      town: 90
      village: 80
      train_station: 30
  iqa:
    enabled: true
    method: !auto
    threshold: 0.1  # For CLIPIQA
    stddev_factor: 2 # For Simple
  entropy_filtering:
    enabled: true
    threshold: 6.5  # TODO: Not implemented - no code uses this configuration
  image_comparison:
    enabled: true
  track_simplification:
    enabled: !auto  # TODO: Not implemented - only auto-detection logic exists
    tolerance: !distance 1 meter  # TODO: Not implemented - no code uses this configuration

site:
  # Site configuration defaults
  image_format: jpg
  image_options: {}
  locale: !auto
  timezone: !auto

debug:
  enable_user_cache: false

strings:
  # Override translation strings here by providing custom values
  journal_title: null
  site_name: null
  map_title: null
  days_title: null
  audio_title: null
  text_title: null
  gallery_title: null
  home_title: null
  generate_title_prompt: null
  generate_tags_prompt: null
  summarize_journal_entry_prompt: null
  summarize_image_prompt: null
  assess_image_quality_prompt: null

llm_prompts:
  # LLM prompt templates

  generate_title:
    translation_key: generate_title_prompt
    model: "granite3.3:8b"
    options:
      temperature: 0.2

  generate_tags:
    translation_key: generate_tags_prompt
    model: "granite3.3:8b"
    options:
      temperature: 0.8

  summarize_journal_entry:
    translation_key: summarize_journal_entry_prompt
    model: "granite3.3:8b" # standard model
    #model: "granite3.3:2b" # light model
    options:
      temperature: 0.3


  summarize_image:
    translation_key: summarize_image_prompt
    model: "granite3.2-vision:2b" # standard model
    #model: "llava-phi3:3.8b" # light model
    options:
      temperature: 0.3
      num_predict: 128

  assess_image_quality:
    translation_key: assess_image_quality_prompt
    model: "granite3.2-vision:2b" # standard model
    #model: "llava-phi3:3.8b" #light model
    options:
      temperature: 0.2
